{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import{withRouter}from\"react-router-dom\";import{setStorageItem,getStorageItem,removeStorageItem,isLogged}from\"../config/Config\";import Api from\"../config/Api\";import Loading from\"../components/Loading\";import Panel from\"../components/Panel\";import Heading from\"../components/Heading\";import Box from\"../components/Box\";import\"../styles/classrooms.css\";import Icon from\"../assets/login-icon.svg\";import ClassIcon from\"../assets/class-icon.svg\";var Classrooms=/*#__PURE__*/function(_React$Component){_inherits(Classrooms,_React$Component);var _super=_createSuper(Classrooms);function Classrooms(){var _this;_classCallCheck(this,Classrooms);_this=_super.call(this);_this.state={subject:{},classrooms:[],loading:true};_this.loadData=_this.loadData.bind(_assertThisInitialized(_this));_this.loadSubject=_this.loadSubject.bind(_assertThisInitialized(_this));return _this;}_createClass(Classrooms,[{key:\"loadData\",value:function(){var _loadData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,subjectId,call,fetchedClassrooms,i,classroomId,classroom;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({loading:true});token=getStorageItem(\"token\");subjectId=this.props.match.params.id;_context.next=5;return Api.getTeacherClassroomsBySubject(subjectId,token);case 5:call=_context.sent;if(!call.classrooms){_context.next=20;break;}fetchedClassrooms=[];i=0;case 9:if(!(i<call.classrooms.length)){_context.next=18;break;}classroomId=call.classrooms[i];_context.next=13;return Api.getClassroom(classroomId,token);case 13:classroom=_context.sent;fetchedClassrooms.push(classroom.classroom);case 15:i++;_context.next=9;break;case 18:console.log(fetchedClassrooms);this.setState({classrooms:fetchedClassrooms,loading:false});case 20:case\"end\":return _context.stop();}}},_callee,this);}));function loadData(){return _loadData.apply(this,arguments);}return loadData;}()},{key:\"loadSubject\",value:function(){var _loadSubject=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token,subjectId,call;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=getStorageItem(\"token\");subjectId=this.props.match.params.id;_context2.next=4;return Api.getSubject(subjectId,token);case 4:call=_context2.sent;if(call.subject){this.setState({subject:call.subject});}case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function loadSubject(){return _loadSubject.apply(this,arguments);}return loadSubject;}()},{key:\"componentDidMount\",value:function componentDidMount(){this.loadSubject();this.loadData();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"screen\",id:\"classrooms\",children:[/*#__PURE__*/_jsx(Heading,{title:this.state.subject.name}),/*#__PURE__*/_jsx(Panel,{title:\"Manage your classrooms\",text:\"All the classrooms you teach in one place. Dive into your classrooms and manage your students and their results.\",image:Icon}),this.state.loading?/*#__PURE__*/_jsx(\"div\",{className:\"fill-space\",children:/*#__PURE__*/_jsx(Loading,{})}):/*#__PURE__*/_jsx(\"div\",{className:\"body-panel\",children:this.state.classrooms.map(function(classroom){return/*#__PURE__*/_jsx(Box,{withAnimation:true,item:classroom,onClick:function onClick(){return _this2.props.history.push(\"/subjects/\"+_this2.state.subject.id+\"/classrooms/\"+classroom.id);},icon:ClassIcon});})})]});}}]);return Classrooms;}(React.Component);export default withRouter(Classrooms);","map":{"version":3,"sources":["/Users/tomasboda/Documents/Workspace/React/edulabs/src/app/screens/Classrooms.js"],"names":["React","withRouter","setStorageItem","getStorageItem","removeStorageItem","isLogged","Api","Loading","Panel","Heading","Box","Classrooms","state","subject","classrooms","loading","loadData","bind","loadSubject","setState","token","subjectId","props","match","params","id","getTeacherClassroomsBySubject","call","fetchedClassrooms","i","length","classroomId","getClassroom","classroom","push","console","log","getSubject","name","Icon","map","history","ClassIcon","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nimport { setStorageItem, getStorageItem, removeStorageItem, isLogged } from \"../config/Config\";\n\nimport Api from \"../config/Api\";\nimport Loading from \"../components/Loading\";\nimport Panel from \"../components/Panel\";\nimport Heading from \"../components/Heading\";\nimport Box from \"../components/Box\";\n\nimport \"../styles/classrooms.css\";\n\nimport Icon from \"../assets/login-icon.svg\";\nimport ClassIcon from \"../assets/class-icon.svg\";\n\nclass Classrooms extends React.Component {\n\n    state = {\n        subject: {},\n        classrooms: [],\n\n        loading: true\n    }\n\n    constructor() {\n        super();\n\n        this.loadData = this.loadData.bind(this);\n        this.loadSubject = this.loadSubject.bind(this);\n    }\n\n    async loadData() {\n        this.setState({ loading: true });\n\n        const token = getStorageItem(\"token\");\n        const subjectId = this.props.match.params.id;\n\n        const call = await Api.getTeacherClassroomsBySubject(subjectId, token);\n\n        if (call.classrooms) {\n            var fetchedClassrooms = [];\n\n            for (let i = 0; i < call.classrooms.length; i++) {\n                const classroomId = call.classrooms[i];\n                const classroom = await Api.getClassroom(classroomId, token);\n                fetchedClassrooms.push(classroom.classroom);\n            }\n\n            console.log(fetchedClassrooms);\n\n            this.setState({\n                classrooms: fetchedClassrooms,\n                loading: false\n            });\n        }\n    }\n\n    async loadSubject() {\n        const token = getStorageItem(\"token\");\n        const subjectId = this.props.match.params.id;\n\n        const call = await Api.getSubject(subjectId, token);\n\n        if (call.subject) {\n            this.setState({ subject: call.subject });\n        }\n    }\n\n    componentDidMount() {\n        this.loadSubject();\n        this.loadData();\n    }\n\n    render() {\n        return(\n            <div className=\"screen\" id=\"classrooms\">\n                <Heading title={this.state.subject.name} />\n\n                <Panel\n                    title={\"Manage your classrooms\"}\n                    text=\"All the classrooms you teach in one place. Dive into your classrooms and manage your students and their results.\"\n                    image={Icon}\n                />\n\n                {this.state.loading ? <div className=\"fill-space\"><Loading /></div> : (\n                    <div className=\"body-panel\">\n                        {this.state.classrooms.map((classroom) => (\n                            <Box\n                                withAnimation\n                                item={classroom}\n                                onClick={() => this.props.history.push(\"/subjects/\" + this.state.subject.id + \"/classrooms/\" + classroom.id)}\n                                icon={ClassIcon}\n                            />\n                        ))}\n                    </div>\n                )}\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Classrooms);"]},"metadata":{},"sourceType":"module"}