{"ast":null,"code":"import _slicedToArray from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from\"react\";import{Link,withRouter}from\"react-router-dom\";import{setStorageItem,getStorageItem,removeStorageItem,isLogged}from\"../config/Config\";import Api from\"../config/Api\";import Loading from\"../components/Loading\";import Panel from\"../components/Panel\";import Heading from\"../components/Heading\";import\"../styles/grades.css\";import Icon from\"../assets/login-icon.svg\";var Grades=/*#__PURE__*/function(_React$Component){_inherits(Grades,_React$Component);var _super=_createSuper(Grades);function Grades(){var _this;_classCallCheck(this,Grades);_this=_super.call(this);_this.state={subjects:[],loading:true};_this.loadSubjects=_this.loadSubjects.bind(_assertThisInitialized(_this));return _this;}_createClass(Grades,[{key:\"loadSubjects\",value:function(){var _loadSubjects=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,call,array,i,add,getSubject,subjectId,getGrades,average,subject;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({loading:true});token=getStorageItem(\"token\");_context.next=4;return Api.getUserSubjects(token);case 4:call=_context.sent;if(!call.subjects){_context.next=26;break;}array=[];i=0;case 8:if(!(i<call.subjects.length)){_context.next=23;break;}add=function add(a,b){return a+b.value;};_context.next=12;return Api.getSubject(call.subjects[i],token);case 12:getSubject=_context.sent;subjectId=getSubject.subject.id;_context.next=16;return Api.getGrades(subjectId,token);case 16:getGrades=_context.sent;average=getGrades.grades.reduce(add,0)/getGrades.grades.length;subject=_objectSpread(_objectSpread({},getSubject.subject),{},{grades:getGrades.grades,average:average});array.push(subject);case 20:i++;_context.next=8;break;case 23:this.setState({subjects:array,loading:false});_context.next=28;break;case 26:this.setState({loading:false});alert(\"ERROR\");case 28:case\"end\":return _context.stop();}}},_callee,this);}));function loadSubjects(){return _loadSubjects.apply(this,arguments);}return loadSubjects;}()},{key:\"componentDidMount\",value:function componentDidMount(){this.loadSubjects();}},{key:\"render\",value:function render(){var _this2=this;var user=this.state.user;return/*#__PURE__*/_jsxs(\"div\",{className:\"screen\",id:\"grades\",children:[/*#__PURE__*/_jsx(Heading,{title:\"Grades\"}),/*#__PURE__*/_jsx(Panel,{title:\"Analyse and improve your results\",text:\"Your average results by subjects, in one place. Analyse your results, consult them with your teachers and improve your skills.\",image:Icon}),this.state.loading?/*#__PURE__*/_jsx(\"div\",{className:\"fill-space\",children:/*#__PURE__*/_jsx(Loading,{})}):/*#__PURE__*/_jsx(\"div\",{className:\"body-panel\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grades\",children:this.state.subjects.map(function(subject,index){return/*#__PURE__*/_jsx(Grade,{withAnimation:true,delay:index*50,title:subject.name,value:subject.average,style:index===_this2.state.subjects.length-1?{border:\"none\"}:null});})})})]});}}]);return Grades;}(React.Component);export function Grade(props){var title=props.title;var value=props.value;var delay=props.delay;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),render=_useState2[0],setRender=_useState2[1];setTimeout(function(){setRender(true);},delay||0);function getColor(value){return value>=50?\"#5E81F4\":\"#FF6A77\";}if(!render){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"grade\"+(props.withAnimation?\" animate__animated animate__fadeInUp\":\"\"),style:props.style,children:[/*#__PURE__*/_jsx(\"div\",{className:\"description\",children:title}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),value?/*#__PURE__*/_jsx(\"div\",{className:\"bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"filled\",style:{width:(value+\"%\").toString(),backgroundColor:getColor(value)}})}):null,value?/*#__PURE__*/_jsxs(\"div\",{className:\"value\",style:{color:getColor(value)},children:[value.toFixed(2),\"%\"]}):/*#__PURE__*/_jsx(\"div\",{className:\"message\",style:{width:100,textAlign:\"right\"},children:\"No grades\"})]});}export default withRouter(Grades);","map":{"version":3,"sources":["/Users/tomasboda/Documents/Workspace/React/edulabs/src/app/screens/Grades.js"],"names":["React","useState","Link","withRouter","setStorageItem","getStorageItem","removeStorageItem","isLogged","Api","Loading","Panel","Heading","Grades","state","subjects","loading","loadSubjects","bind","setState","token","getUserSubjects","call","array","i","length","add","a","b","value","getSubject","subjectId","subject","id","getGrades","average","grades","reduce","push","alert","user","Icon","map","index","name","border","Component","Grade","props","title","delay","render","setRender","setTimeout","getColor","withAnimation","style","flex","width","toString","backgroundColor","color","toFixed","textAlign"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\n\nimport { setStorageItem, getStorageItem, removeStorageItem, isLogged } from \"../config/Config\";\n\nimport Api from \"../config/Api\";\nimport Loading from \"../components/Loading\";\nimport Panel from \"../components/Panel\";\nimport Heading from \"../components/Heading\";\n\nimport \"../styles/grades.css\";\n\nimport Icon from \"../assets/login-icon.svg\";\n\nclass Grades extends React.Component {\n\n    state = {\n        subjects: [],\n\n        loading: true\n    }\n\n    constructor() {\n        super();\n\n        this.loadSubjects = this.loadSubjects.bind(this);\n    }\n\n    async loadSubjects() {\n        this.setState({ loading: true });\n\n        const token = getStorageItem(\"token\");\n        const call = await Api.getUserSubjects(token);\n\n        if (call.subjects) {\n            var array = [];\n\n            for (let i = 0; i < call.subjects.length; i++) {\n                const getSubject = await Api.getSubject(call.subjects[i], token);\n                \n                const subjectId = getSubject.subject.id;\n                const getGrades = await Api.getGrades(subjectId, token);\n\n                function add(a, b) {\n                    return a + b.value;\n                }\n\n                const average = getGrades.grades.reduce(add, 0) / getGrades.grades.length;\n\n                const subject = {\n                    ...getSubject.subject,\n                    grades: getGrades.grades,\n                    average: average\n                }\n\n                array.push(subject);\n            }\n\n            this.setState({\n                subjects: array,\n                loading: false\n            });\n        } else {\n            this.setState({ loading: false });\n            alert(\"ERROR\");\n        }\n    }\n\n    componentDidMount() {\n        this.loadSubjects();\n    }\n\n    render() {\n        const user = this.state.user;\n\n        return(\n            <div className=\"screen\" id=\"grades\">\n                <Heading title=\"Grades\" />\n\n                <Panel\n                    title=\"Analyse and improve your results\"\n                    text=\"Your average results by subjects, in one place. Analyse your results, consult them with your teachers and improve your skills.\"\n                    image={Icon}\n                />\n\n                {this.state.loading ? <div className=\"fill-space\"><Loading /></div> : (\n                    <div className=\"body-panel\">\n                        <div className=\"grades\">\n                            {this.state.subjects.map((subject, index) => (\n                                <Grade\n                                    withAnimation\n                                    delay={index * 50}\n                                    title={subject.name}\n                                    value={subject.average}\n                                    style={index === this.state.subjects.length - 1 ? { border: \"none\" } : null}\n                                />\n                            ))}\n                        </div>\n                    </div>\n                )}\n            </div>\n        )\n    }\n}\n\nexport function Grade(props) {\n    const title = props.title;\n    const value = props.value;\n    const delay = props.delay;\n\n    const [render, setRender] = useState(false);\n\n    setTimeout(() => {\n        setRender(true)\n    }, delay || 0);\n\n    function getColor(value) {\n        return value >= 50 ? \"#5E81F4\" : \"#FF6A77\";\n    }\n\n    if (!render) {\n        return null;\n    }\n\n    return(\n        <div className={\"grade\" + (props.withAnimation ? \" animate__animated animate__fadeInUp\" : \"\")} style={props.style}>\n            <div className=\"description\">{title}</div>\n            <div style={{ flex: 1 }} />\n            {value ? <div className=\"bar\"><div className=\"filled\" style={{ width: (value + \"%\").toString(), backgroundColor: getColor(value) }} /></div> : null}\n            {value ? <div className=\"value\" style={{ color: getColor(value) }}>{value.toFixed(2)}%</div> : <div className=\"message\" style={{ width: 100, textAlign: \"right\" }}>No grades</div>}\n        </div>\n    )\n}\n\nexport default withRouter(Grades);"]},"metadata":{},"sourceType":"module"}