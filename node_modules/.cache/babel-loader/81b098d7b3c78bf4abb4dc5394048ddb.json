{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import{withRouter,Link}from\"react-router-dom\";import{setStorageItem,getStorageItem,removeStorageItem,isLogged}from\"../config/Config\";import{Grade}from\"../screens/Grades\";import Api from\"../config/Api\";import Loading from\"../components/Loading\";import Panel from\"../components/Panel\";import Heading from\"../components/Heading\";import\"../styles/subject.css\";import Icon from\"../assets/login-icon.svg\";var Subject=/*#__PURE__*/function(_React$Component){_inherits(Subject,_React$Component);var _super=_createSuper(Subject);function Subject(){var _this;_classCallCheck(this,Subject);_this=_super.call(this);_this.state={subject:{},grades:[],loading:true};_this.loadSubject=_this.loadSubject.bind(_assertThisInitialized(_this));_this.loadGrades=_this.loadGrades.bind(_assertThisInitialized(_this));return _this;}_createClass(Subject,[{key:\"loadSubject\",value:function(){var _loadSubject=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var id,token,subject;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=this.props.match.params.id;token=getStorageItem(\"token\");_context.next=4;return Api.getSubject(id,token);case 4:subject=_context.sent;if(subject.subject){this.setState({subject:subject.subject,loading:false});}case 6:case\"end\":return _context.stop();}}},_callee,this);}));function loadSubject(){return _loadSubject.apply(this,arguments);}return loadSubject;}()},{key:\"loadGrades\",value:function(){var _loadGrades=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var id,token,grades;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=this.props.match.params.id;token=getStorageItem(\"token\");_context2.next=4;return Api.getGrades(id,token);case 4:grades=_context2.sent;if(grades.grades){this.setState({grades:grades.grades});}case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function loadGrades(){return _loadGrades.apply(this,arguments);}return loadGrades;}()},{key:\"componentDidMount\",value:function componentDidMount(){if(isLogged()){this.loadSubject();this.loadGrades();}else{this.props.history.push(\"/\");}}},{key:\"render\",value:function render(){var _this2=this;var subject=this.state.subject;return/*#__PURE__*/_jsxs(\"div\",{className:\"screen\",id:\"subject\",children:[/*#__PURE__*/_jsx(Heading,{title:subject.name?subject.name:\"Loading\",withArrow:true}),/*#__PURE__*/_jsx(Panel,{title:subject.name?subject.name:\"Loading\",text:\"Welcome back to EduLabs. You have new assignments, homeworks and grades. Look them up in your notification panel.\",image:Icon}),this.state.loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(Loading,{})}):/*#__PURE__*/_jsxs(\"div\",{className:\"body-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel overview-panel animate__animated animate__fadeInUp\",children:/*#__PURE__*/_jsx(\"div\",{className:\"title-small\",children:\"Overview\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel grade-panel animate__animated animate__fadeInUp animate__delay-1s\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title-small\",children:\"Grades\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grades\",children:this.state.grades.length>0?this.state.grades.map(function(grade,index){return/*#__PURE__*/_jsx(Grade,{title:grade.description,value:grade.value,style:index===_this2.state.grades.length-1?{border:\"none\"}:null});}):/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:\"No grades\"})})]})]})]});}}]);return Subject;}(React.Component);export default withRouter(Subject);","map":{"version":3,"sources":["/Users/tomasboda/Documents/Workspace/React/edulabs/src/app/screens/Subject.js"],"names":["React","withRouter","Link","setStorageItem","getStorageItem","removeStorageItem","isLogged","Grade","Api","Loading","Panel","Heading","Subject","state","subject","grades","loading","loadSubject","bind","loadGrades","id","props","match","params","token","getSubject","setState","getGrades","history","push","name","Icon","length","map","grade","index","description","value","border","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\n\nimport { setStorageItem, getStorageItem, removeStorageItem, isLogged } from \"../config/Config\";\nimport { Grade } from \"../screens/Grades\";\n\nimport Api from \"../config/Api\";\nimport Loading from \"../components/Loading\";\nimport Panel from \"../components/Panel\";\nimport Heading from \"../components/Heading\";\n\nimport \"../styles/subject.css\";\n\nimport Icon from \"../assets/login-icon.svg\";\n\nclass Subject extends React.Component {\n\n    state = {\n        subject: {},\n        grades: [],\n\n        loading: true\n    }\n\n    constructor() {\n        super();\n\n        this.loadSubject = this.loadSubject.bind(this);\n        this.loadGrades = this.loadGrades.bind(this);\n    }\n\n    async loadSubject() {\n        const id = this.props.match.params.id;\n        const token = getStorageItem(\"token\");\n\n        const subject = await Api.getSubject(id, token);\n\n        if (subject.subject) {\n            this.setState({ subject: subject.subject, loading: false });\n        }\n    }\n\n    async loadGrades() {\n        const id = this.props.match.params.id;\n        const token = getStorageItem(\"token\");\n\n        const grades = await Api.getGrades(id, token);\n\n        if (grades.grades) {\n            this.setState({ grades: grades.grades });\n        }\n    }\n\n    componentDidMount() {\n        if (isLogged()) {\n            this.loadSubject();\n            this.loadGrades();\n        } else {\n            this.props.history.push(\"/\");\n        }\n    }\n\n    render() {\n        const subject = this.state.subject;\n\n        return(\n            <div className=\"screen\" id=\"subject\">\n                <Heading title={subject.name ? subject.name : \"Loading\"} withArrow />\n\n                <Panel\n                    title={subject.name ? subject.name : \"Loading\"}\n                    text=\"Welcome back to EduLabs. You have new assignments, homeworks and grades. Look them up in your notification panel.\"\n                    image={Icon}\n                />\n\n                {this.state.loading ? (\n                    <div className=\"loading-container\">\n                        <Loading />\n                    </div>\n                ) : (\n                    <div className=\"body-panel\">\n                        <div className=\"panel overview-panel animate__animated animate__fadeInUp\">\n                            <div className=\"title-small\">Overview</div>\n                        </div>\n\n                        <div className=\"panel grade-panel animate__animated animate__fadeInUp animate__delay-1s\">\n                            <div className=\"title-small\">Grades</div>\n\n                            <div className=\"grades\">\n                                {this.state.grades.length > 0 ? (\n                                    this.state.grades.map((grade, index) => (\n                                        <Grade\n                                            title={grade.description}\n                                            value={grade.value}\n                                            style={index === this.state.grades.length - 1 ? { border: \"none\" } : null}\n                                        />\n                                    ))) : <div className=\"message\">No grades</div>}\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Subject);"]},"metadata":{},"sourceType":"module"}