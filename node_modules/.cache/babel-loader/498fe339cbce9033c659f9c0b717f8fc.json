{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import{Link,useLocation,useHistory,withRouter}from\"react-router-dom\";import{setStorageItem,getStorageItem,removeStorageItem,logout}from\"../config/Config\";import Api from\"../config/Api\";import\"../styles/menu.css\";var Menu=/*#__PURE__*/function(_React$Component){_inherits(Menu,_React$Component);var _super=_createSuper(Menu);function Menu(){var _this;_classCallCheck(this,Menu);_this=_super.call(this);_this.state={isAdmin:false,role:\"\"};_this.getUserPermissions=_this.getUserPermissions.bind(_assertThisInitialized(_this));_this.isOpened=_this.isOpened.bind(_assertThisInitialized(_this));_this.isAdminOpened=_this.isAdminOpened.bind(_assertThisInitialized(_this));return _this;}_createClass(Menu,[{key:\"getUserPermissions\",value:function(){var _getUserPermissions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,call;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=getStorageItem(\"token\");_context.next=3;return Api.getUser(token);case 3:call=_context.sent;if(call.user){this.setState({isAdmin:call.user.admin===1?true:false,role:call.user.role});}case 5:case\"end\":return _context.stop();}}},_callee,this);}));function getUserPermissions(){return _getUserPermissions.apply(this,arguments);}return getUserPermissions;}()},{key:\"isOpened\",value:function isOpened(category){if(this.props.location.pathname.includes(category))return true;return false;}},{key:\"isAdminOpened\",value:function isAdminOpened(){if(this.props.location.pathname.includes(\"admin\"))return true;return false;}},{key:\"componentDidMount\",value:function componentDidMount(){this.getUserPermissions();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{id:\"menu\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border\"}),/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:\"EduLabs\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"navigation\",children:[/*#__PURE__*/_jsxs(Link,{className:\"item\",to:\"/dashboard\",children:[/*#__PURE__*/_jsx(\"ion-icon\",{name:\"school-outline\",style:this.isOpened(\"dashboard\")?{color:\"#5E81F4\"}:null}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",style:this.isOpened(\"dashboard\")?{color:\"#383838\"}:null,children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(\"div\",{className:\"selector\",style:this.isOpened(\"dashboard\")?{opacity:1}:{opacity:0}})]}),/*#__PURE__*/_jsxs(Link,{className:\"item\",to:\"/subjects\",children:[/*#__PURE__*/_jsx(\"ion-icon\",{name:\"albums-outline\",style:this.isOpened(\"subjects\")&&!this.isAdminOpened()?{color:\"#5E81F4\"}:null}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",style:this.isOpened(\"subjects\")&&!this.isAdminOpened()?{color:\"#383838\"}:null,children:\"Subjects\"}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(\"div\",{className:\"selector\",style:this.isOpened(\"subjects\")&&!this.isAdminOpened()?{opacity:1}:{opacity:0}})]}),this.state.role===\"student\"?/*#__PURE__*/_jsxs(Link,{className:\"item\",to:\"/grades\",children:[/*#__PURE__*/_jsx(\"ion-icon\",{name:\"list-outline\",style:this.isOpened(\"grades\")&&!this.isAdminOpened()?{color:\"#5E81F4\"}:null}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",style:this.isOpened(\"grades\")&&!this.isAdminOpened()?{color:\"#383838\"}:null,children:\"Grades\"}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(\"div\",{className:\"selector\",style:this.isOpened(\"grades\")&&!this.isAdminOpened()?{opacity:1}:{opacity:0}})]}):null,/*#__PURE__*/_jsxs(Link,{className:\"item\",to:\"/profile\",children:[/*#__PURE__*/_jsx(\"ion-icon\",{name:\"person-outline\",style:this.isOpened(\"profile\")&&!this.isAdminOpened()?{color:\"#5E81F4\"}:null}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",style:this.isOpened(\"profile\")&&!this.isAdminOpened()?{color:\"#383838\"}:null,children:\"Profile\"}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(\"div\",{className:\"selector\",style:this.isOpened(\"profile\")&&!this.isAdminOpened()?{opacity:1}:{opacity:0}})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),this.state.isAdmin?/*#__PURE__*/_jsxs(Link,{className:\"item\",to:\"/admin\",children:[/*#__PURE__*/_jsx(\"ion-icon\",{name:\"cube-outline\",style:this.isOpened(\"admin\")?{color:\"#5E81F4\"}:null}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",style:this.isOpened(\"admin\")?{color:\"#383838\"}:null,children:\"Admin\"}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(\"div\",{className:\"selector\",style:this.isOpened(\"admin\")?{opacity:1}:{opacity:0}})]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"item\",onClick:function onClick(){logout();_this2.props.history.push(\"/\");},children:[/*#__PURE__*/_jsx(\"ion-icon\",{name:\"exit-outline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Logout\"}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}})]})]})]});}}]);return Menu;}(React.Component);export default withRouter(Menu);","map":{"version":3,"sources":["/Users/tomasboda/Documents/Workspace/React/edulabs/src/app/components/Menu.js"],"names":["React","Link","useLocation","useHistory","withRouter","setStorageItem","getStorageItem","removeStorageItem","logout","Api","Menu","state","isAdmin","role","getUserPermissions","bind","isOpened","isAdminOpened","token","getUser","call","user","setState","admin","category","props","location","pathname","includes","color","flex","opacity","history","push","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link, useLocation, useHistory, withRouter } from \"react-router-dom\";\n\nimport { setStorageItem, getStorageItem, removeStorageItem, logout } from \"../config/Config\";\n\nimport Api from \"../config/Api\";\n\nimport \"../styles/menu.css\";\n\nclass Menu extends React.Component {\n\n    state = {\n        isAdmin: false,\n        role: \"\"\n    }\n\n    constructor() {\n        super();\n\n        this.getUserPermissions = this.getUserPermissions.bind(this);\n        this.isOpened = this.isOpened.bind(this);\n        this.isAdminOpened = this.isAdminOpened.bind(this);\n    }\n\n    async getUserPermissions() {\n        const token = getStorageItem(\"token\");\n        const call = await Api.getUser(token);\n\n        if (call.user) {\n            this.setState({\n                isAdmin: call.user.admin === 1 ? true : false,\n                role: call.user.role\n            });\n        }\n    }\n\n    isOpened(category) {\n        if (this.props.location.pathname.includes(category)) return true;\n\n        return false;\n    }\n\n    isAdminOpened() {\n        if (this.props.location.pathname.includes(\"admin\")) return true;\n\n        return false;\n    }\n\n    componentDidMount() {\n        this.getUserPermissions();\n    }\n\n    render() {\n        return(\n            <div id=\"menu\">\n                <div className=\"border\" />\n\n                <div className=\"logo\">EduLabs</div>\n\n                <div className=\"navigation\">\n                    <Link className=\"item\" to=\"/dashboard\">\n                        <ion-icon name=\"school-outline\" style={this.isOpened(\"dashboard\") ? { color: \"#5E81F4\" } : null}></ion-icon>\n                        <div className=\"title\" style={this.isOpened(\"dashboard\") ? { color: \"#383838\" } : null}>Dashboard</div>\n                        <div style={{ flex: 1 }} />\n                        <div className=\"selector\" style={this.isOpened(\"dashboard\") ? { opacity: 1 } : { opacity: 0 }} />\n                    </Link>\n\n                    <Link className=\"item\" to=\"/subjects\">\n                        <ion-icon name=\"albums-outline\" style={this.isOpened(\"subjects\") && !this.isAdminOpened() ? { color: \"#5E81F4\" } : null}></ion-icon>\n                        <div className=\"title\" style={this.isOpened(\"subjects\") && !this.isAdminOpened() ? { color: \"#383838\" } : null}>Subjects</div>\n                        <div style={{ flex: 1 }} />\n                        <div className=\"selector\" style={this.isOpened(\"subjects\") && !this.isAdminOpened() ? { opacity: 1 } : { opacity: 0 }} />\n                    </Link>\n\n                    {this.state.role === \"student\" ? (\n                        <Link className=\"item\" to=\"/grades\">\n                            <ion-icon name=\"list-outline\" style={this.isOpened(\"grades\") && !this.isAdminOpened() ? { color: \"#5E81F4\" } : null}></ion-icon>\n                            <div className=\"title\" style={this.isOpened(\"grades\") && !this.isAdminOpened() ? { color: \"#383838\" } : null}>Grades</div>\n                            <div style={{ flex: 1 }} />\n                            <div className=\"selector\" style={this.isOpened(\"grades\") && !this.isAdminOpened() ? { opacity: 1 } : { opacity: 0 }} />\n                        </Link>\n                    ) : null}\n\n                    <Link className=\"item\" to=\"/profile\">\n                        <ion-icon name=\"person-outline\" style={this.isOpened(\"profile\") && !this.isAdminOpened() ? { color: \"#5E81F4\" } : null}></ion-icon>\n                        <div className=\"title\" style={this.isOpened(\"profile\") && !this.isAdminOpened() ? { color: \"#383838\" } : null}>Profile</div>\n                        <div style={{ flex: 1 }} />\n                        <div className=\"selector\" style={this.isOpened(\"profile\") && !this.isAdminOpened() ? { opacity: 1 } : { opacity: 0 }} />\n                    </Link>\n\n                    <div style={{ flex: 1 }} />\n\n                    {this.state.isAdmin ? (\n                        <Link className=\"item\" to=\"/admin\">\n                            <ion-icon name=\"cube-outline\" style={this.isOpened(\"admin\") ? { color: \"#5E81F4\" } : null}></ion-icon>\n                            <div className=\"title\" style={this.isOpened(\"admin\") ? { color: \"#383838\" } : null}>Admin</div>\n                            <div style={{ flex: 1 }} />\n                            <div className=\"selector\" style={this.isOpened(\"admin\") ? { opacity: 1 } : { opacity: 0 }} />\n                        </Link>\n                    ) : null}\n\n                    <div className=\"item\" onClick={() => {\n                        logout();\n                        this.props.history.push(\"/\")\n                    }}>\n                        <ion-icon name=\"exit-outline\"></ion-icon>\n                        <div className=\"title\">Logout</div>\n                        <div style={{ flex: 1 }} />\n                        {/*<div className=\"selector\" style={location.pathname === \"/profile\" ? { opacity: 1 } : { opacity: 0 }} />*/}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Menu);"]},"metadata":{},"sourceType":"module"}