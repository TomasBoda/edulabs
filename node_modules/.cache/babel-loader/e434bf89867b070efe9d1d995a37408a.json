{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import{withRouter}from\"react-router-dom\";import{setStorageItem,getStorageItem,removeStorageItem}from\"../config/Config\";import Api from\"../config/Api\";import\"../styles/login.css\";import IconImage from\"../assets/login-icon.svg\";import Popup from\"../components/Popup\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.state={email:\"\",password:\"\",popup:false,loading:false,title:\"Nesprávne heslo\"};_this.login=_this.login.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,email,password,login;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({popup:true,loading:true});_this$state=this.state,email=_this$state.email,password=_this$state.password;_context.next=4;return Api.login({email:email,password:password});case 4:login=_context.sent;if(login.token){this.setState({popup:false});setStorageItem(\"token\",login.token);this.props.history.push(\"/dashboard\");}else{this.setState({loading:false,title:login.message});}case 6:case\"end\":return _context.stop();}}},_callee,this);}));function login(){return _login.apply(this,arguments);}return login;}()},{key:\"componentDidMount\",value:function componentDidMount(){var token=getStorageItem(\"token\");if(token){this.props.history.push(\"/dashboard\");}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{id:\"login\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon-panel\",children:/*#__PURE__*/_jsx(\"img\",{className:\"icon\",src:IconImage})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Login to EduLabs\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"EduLabs is a platform students as well as teachers love for its simplicity yet powerful features.\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",value:this.state.email,placeholder:\"E-mail\",onChange:function onChange(event){return _this2.setState({email:event.target.value});}}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"password\",value:this.state.password,placeholder:\"Password\",onChange:function onChange(event){return _this2.setState({password:event.target.value});}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",onClick:function onClick(){return _this2.login();},children:\"Login\"})]}),this.state.popup?/*#__PURE__*/_jsx(Popup,{loading:this.state.loading,title:this.state.title,close:function close(){return _this2.setState({popup:false});}}):null]});}}]);return Login;}(React.Component);export default withRouter(Login);","map":{"version":3,"sources":["/Users/tomasboda/Documents/Workspace/React/edulabs/src/app/screens/Login.js"],"names":["React","withRouter","setStorageItem","getStorageItem","removeStorageItem","Api","Popup","Login","state","email","password","popup","loading","title","login","bind","setState","token","props","history","push","message","IconImage","event","target","value","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nimport { setStorageItem, getStorageItem, removeStorageItem } from \"../config/Config\";\n\nimport Api from \"../config/Api\";\n\nimport \"../styles/login.css\";\n\nimport IconImage from \"../assets/login-icon.svg\";\nimport Popup from \"../components/Popup\";\n\nclass Login extends React.Component {\n\n    state = {\n        email: \"\",\n        password: \"\",\n\n        popup: false,\n        loading: false,\n        title: \"Nesprávne heslo\"\n    }\n\n    constructor() {\n        super();\n\n        this.login = this.login.bind(this);\n    }\n\n    async login() {\n        this.setState({ popup: true, loading: true });\n\n        const { email, password } = this.state;\n\n        const login = await Api.login({\n            email: email,\n            password: password\n        });\n\n        if (login.token) {\n            this.setState({ popup: false });\n            setStorageItem(\"token\", login.token);\n            this.props.history.push(\"/dashboard\");\n        } else {\n            this.setState({ loading: false, title: login.message });\n        }\n    }\n\n    componentDidMount() {\n        const token = getStorageItem(\"token\");\n\n        if (token) {\n            this.props.history.push(\"/dashboard\");\n        }\n    }\n\n    render() {\n        return(\n            <div id=\"login\">\n                <div className=\"icon-panel\">\n                    <img className=\"icon\" src={IconImage} />\n                </div>\n\n                <div className=\"login-panel\">\n                    <div className=\"title\">Login to EduLabs</div>\n                    <div className=\"text\">\n                        EduLabs is a platform students as well as teachers love for its simplicity yet powerful features.\n                    </div>\n\n                    <input className=\"input\" type=\"text\" value={this.state.email} placeholder=\"E-mail\" onChange={(event) => this.setState({ email: event.target.value })} />\n                    <input className=\"input\" type=\"password\" value={this.state.password} placeholder=\"Password\" onChange={(event) => this.setState({ password: event.target.value })} />\n\n                    <br />\n\n                   <div className=\"button\" onClick={() => this.login()}>Login</div>\n                </div>\n\n                {this.state.popup ? (\n                    <Popup\n                        loading={this.state.loading}\n                        title={this.state.title}\n                        close={() => this.setState({ popup: false })}\n                    />\n                ) : null}\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}