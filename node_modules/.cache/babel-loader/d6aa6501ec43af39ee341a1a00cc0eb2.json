{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import{Link,withRouter}from\"react-router-dom\";import{setStorageItem,getStorageItem,removeStorageItem,isLogged}from\"../../config/Config\";import Api from\"../../config/Api\";import Loading from\"../../components/Loading\";import Panel from\"../../components/Panel\";import Heading from\"../../components/Heading\";import Box from\"../../components/Box\";import Edit from\"../../components/Edit\";import Popup from\"../../components/Popup\";import\"../../styles/admin.css\";import Icon from\"../../assets/login-icon.svg\";import ProfileIcon from\"../../assets/profile-icon.svg\";var AdminUser=/*#__PURE__*/function(_React$Component){_inherits(AdminUser,_React$Component);var _super=_createSuper(AdminUser);function AdminUser(){var _this;_classCallCheck(this,AdminUser);_this=_super.call(this);_this.state={user:{},firstname:\"\",lastname:\"\",email:\"\",role:\"\",admin:0,selectedStudentClassroom:\"\",selectedStudentSubjects:[],selectedTeacherSubjects:[],classrooms:[],subjects:[],teacherData:[],loading:true};_this.loadUserData=_this.loadUserData.bind(_assertThisInitialized(_this));_this.loadStudentSubjects=_this.loadStudentSubjects.bind(_assertThisInitialized(_this));_this.loadStudentClassrooms=_this.loadStudentClassrooms.bind(_assertThisInitialized(_this));_this.addStudentSubject=_this.addStudentSubject.bind(_assertThisInitialized(_this));_this.removeStudentSubject=_this.removeStudentSubject.bind(_assertThisInitialized(_this));_this.changeStudentClassroom=_this.changeStudentClassroom.bind(_assertThisInitialized(_this));_this.addTeacherSubject=_this.addTeacherSubject.bind(_assertThisInitialized(_this));_this.removeTeacherSubject=_this.removeTeacherSubject.bind(_assertThisInitialized(_this));_this.loadTeacherSubjectsAndClassrooms=_this.loadTeacherSubjectsAndClassrooms.bind(_assertThisInitialized(_this));_this.isTeached=_this.isTeached.bind(_assertThisInitialized(_this));return _this;}//////////////////////////////////\n_createClass(AdminUser,[{key:\"addStudentSubject\",value:function(){var _addStudentSubject=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(subjectId){var token,userId,call;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=getStorageItem(\"token\");userId=this.props.match.params.id;_context.next=4;return Api.addAdminStudentSubject({userId:userId,subjectId:subjectId,classroomId:this.state.selectedStudentClassroom},token);case 4:call=_context.sent;if(call.message===\"Subject added successfully\"){this.loadStudentSubjects();}case 6:case\"end\":return _context.stop();}}},_callee,this);}));function addStudentSubject(_x){return _addStudentSubject.apply(this,arguments);}return addStudentSubject;}()},{key:\"removeStudentSubject\",value:function(){var _removeStudentSubject=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(subjectId){var token,userId,call;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=getStorageItem(\"token\");userId=this.props.match.params.id;_context2.next=4;return Api.removeAdminStudentSubject({userId:userId,subjectId:subjectId,classroomId:this.state.selectedStudentClassroom},token);case 4:call=_context2.sent;if(call.message===\"Subject removed successfully\"){this.loadStudentSubjects();}case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function removeStudentSubject(_x2){return _removeStudentSubject.apply(this,arguments);}return removeStudentSubject;}()},{key:\"changeStudentClassroom\",value:function(){var _changeStudentClassroom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(classroomId){var token,userId,call;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:token=getStorageItem(\"token\");userId=this.props.match.params.id;_context3.next=4;return Api.changeAdminStudentClassroom({userId:userId,classroomId:classroomId},token);case 4:call=_context3.sent;if(call.message===\"Classroom changed successfully\"){this.loadUserData();}case 6:case\"end\":return _context3.stop();}}},_callee3,this);}));function changeStudentClassroom(_x3){return _changeStudentClassroom.apply(this,arguments);}return changeStudentClassroom;}()},{key:\"loadUserData\",value:function(){var _loadUserData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var token,id,call;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:token=getStorageItem(\"token\");id=this.props.match.params.id;_context4.next=4;return Api.getAdminUser(id,token);case 4:call=_context4.sent;if(call.user){this.setState({firstname:call.user.firstname,lastname:call.user.lastname,email:call.user.email,role:call.user.role,admin:call.user.admin});if(call.user.role===\"student\"){this.setState({selectedStudentClassroom:call.user.classroom});}}case 6:case\"end\":return _context4.stop();}}},_callee4,this);}));function loadUserData(){return _loadUserData.apply(this,arguments);}return loadUserData;}()},{key:\"loadStudentSubjects\",value:function(){var _loadStudentSubjects=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var token,id,allSubjects,studentSubjects,subjects;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:token=getStorageItem(\"token\");id=this.props.match.params.id;_context5.next=4;return Api.getAdminSubjects(token);case 4:allSubjects=_context5.sent;_context5.next=7;return Api.getAdminUserSubjects(id,token);case 7:studentSubjects=_context5.sent;if(allSubjects.subjects&&studentSubjects.subjects){subjects=allSubjects.subjects;subjects.sort(function(a,b){return a.name.localeCompare(b.name);});this.setState({subjects:subjects,selectedStudentSubjects:studentSubjects.subjects});}case 9:case\"end\":return _context5.stop();}}},_callee5,this);}));function loadStudentSubjects(){return _loadStudentSubjects.apply(this,arguments);}return loadStudentSubjects;}()},{key:\"loadStudentClassrooms\",value:function(){var _loadStudentClassrooms=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var token,allClassrooms,classrooms;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:token=getStorageItem(\"token\");_context6.next=3;return Api.getAdminClassrooms(token);case 3:allClassrooms=_context6.sent;if(allClassrooms.classrooms){classrooms=allClassrooms.classrooms;classrooms.sort(function(a,b){return a.name.localeCompare(b.name);});this.setState({classrooms:classrooms});}case 5:case\"end\":return _context6.stop();}}},_callee6,this);}));function loadStudentClassrooms(){return _loadStudentClassrooms.apply(this,arguments);}return loadStudentClassrooms;}()///////////////////////////////////\n},{key:\"addTeacherSubject\",value:function(){var _addTeacherSubject=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(subjectId,classroomId){var token,userId,call;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:token=getStorageItem(\"token\");userId=this.props.match.params.id;_context7.next=4;return Api.addAdminTeacherSubject({userId:userId,subjectId:subjectId,classroomId:classroomId},token);case 4:call=_context7.sent;if(call.message===\"Subject added successfully\"){this.loadTeacherSubjectsAndClassrooms();}case 6:case\"end\":return _context7.stop();}}},_callee7,this);}));function addTeacherSubject(_x4,_x5){return _addTeacherSubject.apply(this,arguments);}return addTeacherSubject;}()},{key:\"removeTeacherSubject\",value:function(){var _removeTeacherSubject=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(subjectId,classroomId){var token,userId,call;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:token=getStorageItem(\"token\");userId=this.props.match.params.id;_context8.next=4;return Api.removeAdminTeacherSubject({userId:userId,subjectId:subjectId,classroomId:classroomId},token);case 4:call=_context8.sent;if(call.message===\"Subject removed successfully\"){this.loadTeacherSubjectsAndClassrooms();}case 6:case\"end\":return _context8.stop();}}},_callee8,this);}));function removeTeacherSubject(_x6,_x7){return _removeTeacherSubject.apply(this,arguments);}return removeTeacherSubject;}()},{key:\"isTeached\",value:function isTeached(classroomId,subjectId){for(var i=0;i<this.state.teacherData.length;i++){var item=this.state.teacherData[i];if(item.classroom_id===classroomId&&item.subject_id===subjectId){return true;}}return false;}},{key:\"loadTeacherSubjectsAndClassrooms\",value:function(){var _loadTeacherSubjectsAndClassrooms=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var token,id,subjects,classrooms,call,fetchedClassrooms,fetchedSubjects;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:token=getStorageItem(\"token\");id=this.props.match.params.id;_context9.next=4;return Api.getAdminSubjects(token);case 4:subjects=_context9.sent;_context9.next=7;return Api.getAdminClassrooms(token);case 7:classrooms=_context9.sent;_context9.next=10;return Api.getAdminTeacherSubjectsAndClassrooms(id,token);case 10:call=_context9.sent;console.log(call.data);console.log(classrooms.classrooms);console.log(subjects.subjects);if(call.data&&subjects.subjects&&classrooms.classrooms){fetchedClassrooms=classrooms.classrooms;fetchedSubjects=subjects.subjects;fetchedClassrooms.sort(function(a,b){return a.name.localeCompare(b.name);});fetchedSubjects.sort(function(a,b){return a.name.localeCompare(b.name);});this.setState({subjects:fetchedSubjects,classrooms:fetchedClassrooms,teacherData:call.data});}case 15:case\"end\":return _context9.stop();}}},_callee9,this);}));function loadTeacherSubjectsAndClassrooms(){return _loadTeacherSubjectsAndClassrooms.apply(this,arguments);}return loadTeacherSubjectsAndClassrooms;}()///////////////////////////////////\n},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.loadUserData();case 2:if(!(this.state.role===\"student\")){_context10.next=9;break;}_context10.next=5;return this.loadStudentClassrooms();case 5:_context10.next=7;return this.loadStudentSubjects();case 7:_context10.next=12;break;case 9:if(!(this.state.role===\"teacher\")){_context10.next=12;break;}_context10.next=12;return this.loadTeacherSubjectsAndClassrooms();case 12:case\"end\":return _context10.stop();}}},_callee10,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"screen\",id:\"admin-user\",children:[/*#__PURE__*/_jsx(Heading,{title:\"User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"body-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel top-panel\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"profile-image\",src:ProfileIcon}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:this.state.firstname+\" \"+this.state.lastname}),/*#__PURE__*/_jsx(\"div\",{className:\"role\",children:this.state.role===\"student\"?\"Student\":\"Teacher\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel left-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title-small\",children:\"Personal info\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:15}}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",placeholder:\"First name\",value:this.state.firstname,onChange:function onChange(event){return _this2.setState({firstname:event.target.value});}}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",placeholder:\"Last name\",value:this.state.lastname,onChange:function onChange(event){return _this2.setState({lastname:event.target.value});}}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",placeholder:\"E-mail\",value:this.state.email,onChange:function onChange(event){return _this2.setState({email:event.target.value});}}),/*#__PURE__*/_jsx(\"div\",{style:{height:20}}),/*#__PURE__*/_jsx(\"div\",{className:\"title-small\",children:\"Privileges\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:20}}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button\"+(this.state.admin===1?\"\":\"-disabled\"),onClick:function onClick(){return _this2.setState({admin:1});},children:\"Admin\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:10}}),/*#__PURE__*/_jsx(\"div\",{className:\"button\"+(this.state.admin===0?\"\":\"-disabled\"),onClick:function onClick(){return _this2.setState({admin:0});},children:\"Regular\"})]})]}),this.state.role===\"student\"?/*#__PURE__*/_jsxs(\"div\",{className:\"right-panel\",id:\"student-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel classroom-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title-small\",children:\"Classroom\"}),/*#__PURE__*/_jsx(\"div\",{className:\"list\",children:this.state.classrooms.map(function(classroom){return/*#__PURE__*/_jsx(\"div\",{className:\"item\",onClick:function onClick(){return _this2.changeStudentClassroom(classroom.id);},style:classroom.id===_this2.state.selectedStudentClassroom?{backgroundColor:\"#5E81F4\",color:\"white\"}:null,children:classroom.name});})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel subject-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title-small\",children:\"Subjects\"}),/*#__PURE__*/_jsx(\"div\",{className:\"list\",children:this.state.subjects.map(function(subject){return/*#__PURE__*/_jsx(\"div\",{className:\"item\",onClick:function onClick(){return _this2.state.selectedStudentSubjects.includes(subject.id)?_this2.removeStudentSubject(subject.id):_this2.addStudentSubject(subject.id);},style:_this2.state.selectedStudentSubjects.includes(subject.id)?{backgroundColor:\"#5E81F4\",color:\"white\"}:null,children:subject.name});})})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"right-panel\",id:\"teacher-panel\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"panel classroom-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title-small\",children:\"Classrooms\"}),/*#__PURE__*/_jsx(\"div\",{className:\"classrooms\",children:this.state.classrooms.map(function(classroom){return/*#__PURE__*/_jsxs(\"div\",{className:\"classroom\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"info\",children:classroom.name}),/*#__PURE__*/_jsx(\"div\",{className:\"list\",children:_this2.state.subjects.map(function(subject){return/*#__PURE__*/_jsx(\"div\",{className:\"item\",onClick:function onClick(){return _this2.isTeached(classroom.id,subject.id)?_this2.removeTeacherSubject(subject.id,classroom.id):_this2.addTeacherSubject(subject.id,classroom.id);},style:_this2.isTeached(classroom.id,subject.id)?{backgroundColor:\"#5E81F4\",color:\"white\"}:null,children:subject.name});})})]});})})]})})]})]}),this.state.popup?/*#__PURE__*/_jsx(Popup,{loading:this.state.loading,title:this.state.message,close:function close(){return _this2.setState({popup:false},function(){return _this2.loadData();});}}):null]});}}]);return AdminUser;}(React.Component);export default withRouter(AdminUser);","map":{"version":3,"sources":["/Users/tomasboda/Documents/Workspace/React/edulabs/src/app/screens/admin/AdminUser.js"],"names":["React","Link","withRouter","setStorageItem","getStorageItem","removeStorageItem","isLogged","Api","Loading","Panel","Heading","Box","Edit","Popup","AdminUser","state","user","firstname","lastname","email","role","admin","selectedStudentClassroom","selectedStudentSubjects","selectedTeacherSubjects","classrooms","subjects","teacherData","loading","loadUserData","bind","loadStudentSubjects","loadStudentClassrooms","addStudentSubject","removeStudentSubject","changeStudentClassroom","addTeacherSubject","removeTeacherSubject","loadTeacherSubjectsAndClassrooms","isTeached","subjectId","token","userId","props","match","params","id","addAdminStudentSubject","classroomId","call","message","removeAdminStudentSubject","changeAdminStudentClassroom","getAdminUser","setState","classroom","getAdminSubjects","allSubjects","getAdminUserSubjects","studentSubjects","sort","a","b","name","localeCompare","getAdminClassrooms","allClassrooms","addAdminTeacherSubject","removeAdminTeacherSubject","i","length","item","classroom_id","subject_id","getAdminTeacherSubjectsAndClassrooms","console","log","data","fetchedClassrooms","fetchedSubjects","ProfileIcon","height","event","target","value","width","map","backgroundColor","color","subject","includes","popup","loadData","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\n\nimport { setStorageItem, getStorageItem, removeStorageItem, isLogged } from \"../../config/Config\";\n\nimport Api from \"../../config/Api\";\nimport Loading from \"../../components/Loading\";\nimport Panel from \"../../components/Panel\";\nimport Heading from \"../../components/Heading\";\nimport Box from \"../../components/Box\";\nimport Edit from \"../../components/Edit\";\nimport Popup from \"../../components/Popup\";\n\nimport \"../../styles/admin.css\";\n\nimport Icon from \"../../assets/login-icon.svg\";\nimport ProfileIcon from \"../../assets/profile-icon.svg\";\n\nclass AdminUser extends React.Component {\n\n    state = {\n        user: {},\n\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        role: \"\",\n        admin: 0,\n\n        selectedStudentClassroom: \"\",\n        selectedStudentSubjects: [],\n\n        selectedTeacherSubjects: [],\n\n        classrooms: [],\n        subjects: [],\n\n        teacherData: [],\n\n        loading: true,\n    }\n\n    constructor() {\n        super();\n\n        this.loadUserData = this.loadUserData.bind(this);\n        \n        this.loadStudentSubjects = this.loadStudentSubjects.bind(this);\n        this.loadStudentClassrooms = this.loadStudentClassrooms.bind(this);\n        this.addStudentSubject = this.addStudentSubject.bind(this);\n        this.removeStudentSubject = this.removeStudentSubject.bind(this);\n        this.changeStudentClassroom = this.changeStudentClassroom.bind(this);\n\n        this.addTeacherSubject = this.addTeacherSubject.bind(this);\n        this.removeTeacherSubject = this.removeTeacherSubject.bind(this);\n        this.loadTeacherSubjectsAndClassrooms = this.loadTeacherSubjectsAndClassrooms.bind(this);\n        this.isTeached = this.isTeached.bind(this);\n    }\n\n    //////////////////////////////////\n\n    async addStudentSubject(subjectId) {\n        const token = getStorageItem(\"token\");\n        const userId = this.props.match.params.id;\n\n        const call = await Api.addAdminStudentSubject({\n            userId: userId,\n            subjectId: subjectId,\n            classroomId: this.state.selectedStudentClassroom\n        }, token);\n\n        if (call.message === \"Subject added successfully\") {\n            this.loadStudentSubjects();\n        }\n    }\n\n    async removeStudentSubject(subjectId) {\n        const token = getStorageItem(\"token\");\n        const userId = this.props.match.params.id;\n\n        const call = await Api.removeAdminStudentSubject({\n            userId: userId,\n            subjectId: subjectId,\n            classroomId: this.state.selectedStudentClassroom\n        }, token);\n\n        if (call.message === \"Subject removed successfully\") {\n            this.loadStudentSubjects();\n        }\n    }\n\n    async changeStudentClassroom(classroomId) {\n        const token = getStorageItem(\"token\");\n        const userId = this.props.match.params.id;\n\n        const call = await Api.changeAdminStudentClassroom({\n            userId: userId,\n            classroomId: classroomId\n        }, token);\n\n        if (call.message === \"Classroom changed successfully\") {\n            this.loadUserData();\n        }\n    }\n\n    async loadUserData() {\n        const token = getStorageItem(\"token\");\n        const id = this.props.match.params.id;\n\n        const call = await Api.getAdminUser(id, token);\n\n        if (call.user) {\n            this.setState({\n                firstname: call.user.firstname,\n                lastname: call.user.lastname,\n                email: call.user.email,\n                role: call.user.role,\n                admin: call.user.admin,\n            });\n\n            if (call.user.role === \"student\") {\n                this.setState({ selectedStudentClassroom: call.user.classroom });\n            }\n        }\n    }\n\n    async loadStudentSubjects() {\n        const token = getStorageItem(\"token\");\n        const id = this.props.match.params.id;\n\n        const allSubjects = await Api.getAdminSubjects(token);\n        const studentSubjects = await Api.getAdminUserSubjects(id, token);\n\n        if (allSubjects.subjects && studentSubjects.subjects) {\n            const subjects = allSubjects.subjects;\n            subjects.sort((a, b) => {\n                return a.name.localeCompare(b.name);\n            });\n\n            this.setState({\n                subjects: subjects,\n                selectedStudentSubjects: studentSubjects.subjects\n            });\n        }\n    }\n\n    async loadStudentClassrooms() {\n        const token = getStorageItem(\"token\");\n\n        const allClassrooms = await Api.getAdminClassrooms(token);\n\n        if (allClassrooms.classrooms) {\n            const classrooms = allClassrooms.classrooms;\n            classrooms.sort((a, b) => {\n                return a.name.localeCompare(b.name);\n            });\n\n            this.setState({\n                classrooms: classrooms\n            });\n        }\n    }\n\n    ///////////////////////////////////\n\n    async addTeacherSubject(subjectId, classroomId) {\n        const token = getStorageItem(\"token\");\n        const userId = this.props.match.params.id;\n\n        const call = await Api.addAdminTeacherSubject({\n            userId: userId,\n            subjectId: subjectId,\n            classroomId: classroomId\n        }, token);\n\n        if (call.message === \"Subject added successfully\") {\n            this.loadTeacherSubjectsAndClassrooms();\n        }\n    }\n\n    async removeTeacherSubject(subjectId, classroomId) {\n        const token = getStorageItem(\"token\");\n        const userId = this.props.match.params.id;\n\n        const call = await Api.removeAdminTeacherSubject({\n            userId: userId,\n            subjectId: subjectId,\n            classroomId: classroomId\n        }, token);\n\n        if (call.message === \"Subject removed successfully\") {\n            this.loadTeacherSubjectsAndClassrooms();\n        }\n    }\n\n    isTeached(classroomId, subjectId) {\n        for (let i = 0; i < this.state.teacherData.length; i++) {\n            const item = this.state.teacherData[i];\n\n            if (item.classroom_id === classroomId && item.subject_id === subjectId) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    async loadTeacherSubjectsAndClassrooms() {\n        const token = getStorageItem(\"token\");\n        const id = this.props.match.params.id;\n\n        const subjects = await Api.getAdminSubjects(token);\n        const classrooms = await Api.getAdminClassrooms(token);\n        const call = await Api.getAdminTeacherSubjectsAndClassrooms(id, token);\n\n        console.log(call.data);\n        console.log(classrooms.classrooms);\n        console.log(subjects.subjects);\n\n        if (call.data && subjects.subjects && classrooms.classrooms) {\n            const fetchedClassrooms = classrooms.classrooms;\n            const fetchedSubjects = subjects.subjects;\n\n            fetchedClassrooms.sort((a, b) => {\n                return a.name.localeCompare(b.name);\n            });\n\n            fetchedSubjects.sort((a, b) => {\n                return a.name.localeCompare(b.name);\n            });\n\n            this.setState({\n                subjects: fetchedSubjects,\n                classrooms: fetchedClassrooms,\n                teacherData: call.data\n            })\n        }\n    }\n\n    ///////////////////////////////////\n\n    async componentDidMount() {\n        await this.loadUserData();\n\n        if (this.state.role === \"student\") {\n            await this.loadStudentClassrooms();\n            await this.loadStudentSubjects();\n        } else if (this.state.role === \"teacher\") {\n            await this.loadTeacherSubjectsAndClassrooms();\n        }\n    }\n\n    render() {\n        return(\n            <div className=\"screen\" id=\"admin-user\">\n                <Heading title=\"User\" />\n\n                <div className=\"body-panel\">\n                    <div className=\"panel top-panel\">\n                        <img className=\"profile-image\" src={ProfileIcon} />\n\n                        <div className=\"info-panel\">\n                            <div className=\"name\">{this.state.firstname + \" \" + this.state.lastname}</div>\n                            <div className=\"role\">{this.state.role === \"student\" ? \"Student\" : \"Teacher\"}</div>\n                        </div>\n                    </div>\n\n                    <div className=\"bottom-panel\">\n                        <div className=\"panel left-panel\">\n                            <div className=\"title-small\">Personal info</div>\n\n                            <div style={{ height: 15 }} />\n\n                            <input className=\"input\" type=\"text\" placeholder=\"First name\" value={this.state.firstname} onChange={(event) => this.setState({ firstname: event.target.value })} />\n                            <input className=\"input\" type=\"text\" placeholder=\"Last name\" value={this.state.lastname} onChange={(event) => this.setState({ lastname: event.target.value })} />\n                            <input className=\"input\" type=\"text\" placeholder=\"E-mail\" value={this.state.email} onChange={(event) => this.setState({ email: event.target.value })} />\n\n                            {/*\n                            <div style={{ height: 20 }} />\n\n                            <div className=\"title-small\">Role</div>\n\n                            <div style={{ height: 15 }} />\n\n                            <div className=\"button-panel\">\n                                <div className={\"button\" + (this.state.role === \"student\" ? \"\" : \"-disabled\")} onClick={() => this.setState({ role: \"student\" })}>Student</div>\n                                <div style={{ width: 10 }} />\n                                <div className={\"button\" + (this.state.role === \"teacher\" ? \"\" : \"-disabled\")} onClick={() => this.setState({ role: \"teacher\" })}>Teacher</div>\n                            </div>\n                            */}\n\n                            <div style={{ height: 20 }} />\n\n                            <div className=\"title-small\">Privileges</div>\n\n                            <div style={{ height: 20 }} />\n\n                            <div className=\"button-panel\">\n                                <div className={\"button\" + (this.state.admin === 1 ? \"\" : \"-disabled\")} onClick={() => this.setState({ admin: 1 })}>Admin</div>\n                                <div style={{ width: 10 }} />\n                                <div className={\"button\" + (this.state.admin === 0 ? \"\" : \"-disabled\")} onClick={() => this.setState({ admin: 0 })}>Regular</div>\n                            </div>\n                        </div>\n\n                        {this.state.role === \"student\" ? (\n                        <div className=\"right-panel\" id=\"student-panel\">\n                            <div className=\"panel classroom-panel\">\n                                <div className=\"title-small\">Classroom</div>\n\n                                <div className=\"list\">\n                                    {this.state.classrooms.map((classroom) => (\n                                        <div className=\"item\" onClick={() => this.changeStudentClassroom(classroom.id)} style={classroom.id === this.state.selectedStudentClassroom ? { backgroundColor: \"#5E81F4\", color: \"white\" } : null}>\n                                            {classroom.name}\n                                        </div>\n                                    ))}\n                                </div>\n                            </div>\n\n                            <div className=\"panel subject-panel\">\n                                <div className=\"title-small\">Subjects</div>\n\n                                <div className=\"list\">\n                                    {this.state.subjects.map((subject) => (\n                                        <div className=\"item\" onClick={() => this.state.selectedStudentSubjects.includes(subject.id) ? this.removeStudentSubject(subject.id) : this.addStudentSubject(subject.id)} style={this.state.selectedStudentSubjects.includes(subject.id) ? { backgroundColor: \"#5E81F4\", color: \"white\" } : null}>\n                                            {subject.name}\n                                        </div>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n                        ) : (\n                        <div className=\"right-panel\" id=\"teacher-panel\">\n                            <div className=\"panel classroom-panel\">\n                                <div className=\"title-small\">Classrooms</div>\n\n                                <div className=\"classrooms\">\n                                    {this.state.classrooms.map((classroom) => (\n                                        <div className=\"classroom\">\n                                            <div className=\"info\">\n                                                {classroom.name}\n                                            </div>\n\n                                            <div className=\"list\">\n                                                {this.state.subjects.map((subject) => (\n                                                    <div className=\"item\"\n                                                        onClick={() => this.isTeached(classroom.id, subject.id) ? this.removeTeacherSubject(subject.id, classroom.id) : this.addTeacherSubject(subject.id, classroom.id)}\n                                                        style={this.isTeached(classroom.id, subject.id) ? { backgroundColor: \"#5E81F4\", color: \"white\" } : null}\n                                                    >\n                                                        {subject.name}\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n                        )}\n                    </div>\n                </div>\n\n                {this.state.popup ? (\n                    <Popup\n                        loading={this.state.loading}\n                        title={this.state.message}\n                        close={() => this.setState({ popup: false }, () => this.loadData())}\n                    />\n                ) : null}\n            </div>\n        )\n    }\n}\n\nexport default withRouter(AdminUser);"]},"metadata":{},"sourceType":"module"}