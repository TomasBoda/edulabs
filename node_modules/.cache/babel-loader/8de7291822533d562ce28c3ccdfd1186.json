{"ast":null,"code":"import _objectSpread from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tomasboda/Documents/Workspace/React/edulabs/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import{withRouter}from\"react-router-dom\";import{setStorageItem,getStorageItem,removeStorageItem,isLogged}from\"../config/Config\";import Api from\"../config/Api\";import Loading from\"../components/Loading\";import Panel from\"../components/Panel\";import Heading from\"../components/Heading\";import{Grade}from\"./Grades\";import\"../styles/dashboard.css\";import Icon from\"../assets/dashboard-icon.svg\";import PanelIcon from\"../assets/subjects-icon.svg\";var Dashboard=/*#__PURE__*/function(_React$Component){_inherits(Dashboard,_React$Component);var _super=_createSuper(Dashboard);function Dashboard(){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this);_this.state={user:{},grades:[],loading:true};_this.getUser=_this.getUser.bind(_assertThisInitialized(_this));_this.loadGrades=_this.loadGrades.bind(_assertThisInitialized(_this));return _this;}_createClass(Dashboard,[{key:\"getUser\",value:function(){var _getUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=getStorageItem(\"token\");_context.next=3;return Api.getUser(token);case 3:user=_context.sent;if(user.user){this.setState({user:user.user});}case 5:case\"end\":return _context.stop();}}},_callee,this);}));function getUser(){return _getUser.apply(this,arguments);}return getUser;}()},{key:\"loadGrades\",value:function(){var _loadGrades=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token,call,grades,i,subject;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.setState({loading:true});token=getStorageItem(\"token\");_context2.next=4;return Api.getUserGrades(token);case 4:call=_context2.sent;if(!call.grades){_context2.next=17;break;}grades=[];i=0;case 8:if(!(i<call.grades.length)){_context2.next=16;break;}_context2.next=11;return Api.getSubject(call.grades[i].subject_id,token);case 11:subject=_context2.sent;if(subject.subject){grades.push(_objectSpread(_objectSpread({},call.grades[i]),{},{subject:subject.subject}));}case 13:i++;_context2.next=8;break;case 16:this.setState({grades:grades,loading:false});case 17:case\"end\":return _context2.stop();}}},_callee2,this);}));function loadGrades(){return _loadGrades.apply(this,arguments);}return loadGrades;}()},{key:\"componentDidMount\",value:function componentDidMount(){this.getUser();this.loadGrades();}},{key:\"render\",value:function render(){var _this2=this;var user=this.state.user;return/*#__PURE__*/_jsxs(\"div\",{className:\"screen\",id:\"dashboard\",children:[/*#__PURE__*/_jsx(Heading,{title:\"Dashboard\"}),/*#__PURE__*/_jsx(Panel,{title:\"Welcome back, \"+user.firstname,text:\"Welcome back to EduLabs. A place where education prospers, a place where teachers help their students get the best out of their skills and help them grow.\",image:PanelIcon}),this.state.loading?/*#__PURE__*/_jsx(\"div\",{className:\"fill-space\",children:/*#__PURE__*/_jsx(Loading,{})}):/*#__PURE__*/_jsxs(\"div\",{className:\"body-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grade-panel panel animate__animated animate__fadeInUp\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title-small\",children:\"Results\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grades\",style:this.state.grades.length===0?{height:250}:null,children:this.state.grades.length>0?this.state.grades.map(function(grade,index){return/*#__PURE__*/_jsx(Grade,{title:grade.description,subjectName:grade.subject.name,value:grade.value,style:index===_this2.state.grades.length-1?{border:\"none\"}:null});}):/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:\"No grades\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"panel homework animate__animated animate__fadeInUp animate__delay-1s\",children:/*#__PURE__*/_jsx(\"div\",{className:\"title-small\",children:\"Homework\"})})]})]});}}]);return Dashboard;}(React.Component);export default withRouter(Dashboard);","map":{"version":3,"sources":["/Users/tomasboda/Documents/Workspace/React/edulabs/src/app/screens/Dashboard.js"],"names":["React","withRouter","setStorageItem","getStorageItem","removeStorageItem","isLogged","Api","Loading","Panel","Heading","Grade","Dashboard","state","user","grades","loading","getUser","bind","loadGrades","token","setState","getUserGrades","call","i","length","getSubject","subject_id","subject","push","firstname","PanelIcon","height","map","grade","index","description","name","value","border","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nimport { setStorageItem, getStorageItem, removeStorageItem, isLogged } from \"../config/Config\";\n\nimport Api from \"../config/Api\";\nimport Loading from \"../components/Loading\";\nimport Panel from \"../components/Panel\";\nimport Heading from \"../components/Heading\";\nimport { Grade } from \"./Grades\";\n\nimport \"../styles/dashboard.css\";\n\nimport Icon from \"../assets/dashboard-icon.svg\";\nimport PanelIcon from \"../assets/subjects-icon.svg\";\n\nclass Dashboard extends React.Component {\n\n    state = {\n        user: {},\n        grades: [],\n\n        loading: true\n    }\n\n    constructor() {\n        super();\n\n        this.getUser = this.getUser.bind(this);\n        this.loadGrades = this.loadGrades.bind(this);\n    }\n\n    async getUser() {\n        const token = getStorageItem(\"token\");\n\n        const user = await Api.getUser(token);\n\n        if (user.user) {\n            this.setState({ user: user.user });\n        }\n    }\n\n    async loadGrades() {\n        this.setState({ loading: true });\n\n        const token = getStorageItem(\"token\");\n\n        const call = await Api.getUserGrades(token);\n\n        if (call.grades) {\n            const grades = [];\n\n            for (let i = 0; i <Â call.grades.length; i++) {\n                const subject = await Api.getSubject(call.grades[i].subject_id, token);\n\n                if (subject.subject) {\n                    grades.push({\n                        ...call.grades[i],\n                        subject: subject.subject\n                    });\n                }\n            }\n\n            this.setState({\n                grades: grades,\n                loading: false\n            })\n        }\n    }\n\n    componentDidMount() {\n        this.getUser();\n        this.loadGrades();\n    }\n\n    render() {\n        const user = this.state.user;\n\n        return(\n            <div className=\"screen\" id=\"dashboard\">\n                <Heading title=\"Dashboard\" />\n\n                <Panel\n                    title={\"Welcome back, \" + user.firstname}\n                    text=\"Welcome back to EduLabs. A place where education prospers, a place where teachers help their students get the best out of their skills and help them grow.\"\n                    image={PanelIcon}\n                />\n\n                {this.state.loading ? <div className=\"fill-space\"><Loading /></div> : (\n                    <div className=\"body-panel\">\n                        <div className=\"grade-panel panel animate__animated animate__fadeInUp\">\n                            <div className=\"title-small\">Results</div>\n\n                            <div className=\"grades\" style={this.state.grades.length === 0 ? { height: 250 } : null}>\n                                {this.state.grades.length > 0 ? (\n                                    this.state.grades.map((grade, index) => (\n                                        <Grade\n                                            title={grade.description}\n                                            subjectName={grade.subject.name}\n                                            value={grade.value}\n                                            style={index === this.state.grades.length - 1 ? { border: \"none\" } : null}\n                                        />\n                                    ))) : <div className=\"message\">No grades</div>}\n                            </div>\n                        </div>\n\n                        <div className=\"panel homework animate__animated animate__fadeInUp animate__delay-1s\">\n                            <div className=\"title-small\">Homework</div>\n                        </div>\n                    </div>\n                )}\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Dashboard);"]},"metadata":{},"sourceType":"module"}